import{r as c,j as t,L as A,B as z,m as D,Q as O}from"./index-BrKBQ3dl.js";import{A as q}from"./arrow-left-Bp2o7Yau.js";import{W as Q}from"./wallet-Bviz8yAJ.js";import{S as $}from"./shield-check-D3c4qx9B.js";import{C as G,R as H,I as L}from"./refresh-cw-t6JHrKN9.js";import{T as Y}from"./trending-up-CTm7MXke.js";import{P as X}from"./percent-tecTrWYe.js";const w=(a,o=!0)=>{if(a==null||isNaN(a))return o?"0 VNĐ":"0";const n=new Intl.NumberFormat("vi-VN").format(a);return o?`${n} VNĐ`:n},C=a=>{const o=a.replace(/[^0-9]/g,"");if(o==="")return;const n=parseFloat(o);return isNaN(n)?void 0:n},J=a=>{if(a==null||isNaN(a)||a===1/0)return"...";if(a<0)return"N/A";const o=Math.floor(a),n=Math.round((a-o)*12);let d="";return o>0&&(d+=`${o} năm `),n>0&&(d+=`${n} tháng`),d.trim()||(o===0&&n===0?"Ngay bây giờ!":"0 tháng")},E=({id:a,label:o,value:n,onChange:d,icon:f,unit:v,placeholder:r,tooltip:y,min:e=0,max:N})=>{const[l,h]=c.useState(String(n));c.useEffect(()=>{if(String(n)!==l){const s=parseFloat(l.replace(",","."));(isNaN(s)||n!==s)&&h(String(n))}},[n]);const m=s=>{let i=s.target.value;i=i.replace(",",".");let b="",u=!1;for(const x of i)(x>="0"&&x<="9"||x==="."&&!u)&&(b+=x,x==="."&&(u=!0));if(i=b,h(i),i===""||i===".")d(e);else{const x=parseFloat(i);isNaN(x)?d(e):d(x)}},I=()=>{let s=parseFloat(l.replace(",","."));isNaN(s)||s<e?s=e:N!==void 0&&s>N&&(s=N),h(String(s)),d(s)};return t.jsxs("div",{className:"mb-6",children:[t.jsxs("label",{htmlFor:a,className:"flex items-center text-sm font-medium text-gray-700 mb-1.5",children:[f&&t.jsx("span",{className:"mr-2 opacity-70",children:f}),o,y&&t.jsxs("span",{className:"ml-1.5 group relative",children:[t.jsx(L,{size:14,className:"text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-max max-w-xs p-2 text-xs text-white bg-slate-800 rounded-md opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10 shadow-lg",children:y})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",inputMode:"decimal",id:a,value:l,onChange:m,onBlur:I,placeholder:r,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors text-gray-800 placeholder-gray-400 text-lg"}),v&&t.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm pointer-events-none",children:v})]})]})},M=({id:a,label:o,value:n,onValueChange:d,icon:f,unit:v,placeholder:r,tooltip:y,min:e=0,isRequired:N})=>{const[l,h]=c.useState(n!==void 0?w(n,!1):"");c.useEffect(()=>{const s=C(l);(n!==s||n===void 0&&l!=="")&&h(n!==void 0?w(n,!1):"")},[n]);const m=s=>{const i=s.target.value,b=C(i);if(i==="")h(""),d(void 0);else if(b!==void 0)h(w(b,!1)),d(b);else{const u=i.replace(/[^0-9]/g,"");h(u)}},I=()=>{let s=C(l);if(s===void 0)if(N)s=e;else{d(void 0),h("");return}s<e&&(s=e),h(w(s,!1)),d(s)};return t.jsxs("div",{className:"mb-6",children:[t.jsxs("label",{htmlFor:a,className:"flex items-center text-sm font-medium text-gray-700 mb-1.5",children:[f&&t.jsx("span",{className:"mr-2 opacity-70",children:f}),o," ",N&&t.jsx("span",{className:"text-red-500 ml-0.5",children:"*"}),y&&t.jsxs("span",{className:"ml-1.5 group relative",children:[t.jsx(L,{size:14,className:"text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-max max-w-xs p-2 text-xs text-white bg-slate-800 rounded-md opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10 shadow-lg",children:y})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",inputMode:"numeric",id:a,value:l,onChange:m,onBlur:I,placeholder:r,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors text-gray-800 placeholder-gray-400 text-lg"}),v&&t.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm pointer-events-none",children:v})]})]})},rt=()=>{const[a,o]=c.useState(1),[n,d]=c.useState(void 0),[f,v]=c.useState(4),[r,y]=c.useState(null),[e,N]=c.useState(void 0),[l,h]=c.useState(void 0),[m,I]=c.useState(7),[s,i]=c.useState(null),[b,u]=c.useState(null),[x,p]=c.useState("");c.useEffect(()=>{if(n!==void 0&&n>0&&f>0){const j=n*12/(f/100);y(j)}else y(null)},[n,f]);const R=c.useCallback(()=>{if(r===null||r<=0||e===void 0||l===void 0||m===void 0||l<0||m<0){i(null),u(null),p("");return}if(e>=r){i(0),u(e),p("Đã đạt được!");return}if(l===0&&e<r&&m===0){i(1/0),u(e),p("Không bao giờ (với các thông số hiện tại)");return}if(l===0&&e<r&&m>0&&e*(1+m/100)<=e&&e>0){i(1/0),u(e),p("Không thể đạt được (lãi suất không đủ bù)");return}let j=0,S=e;const V=l*12,T=m/100;if(V===0&&T>0){if(e<=0||e>=r){i(e>=r?0:1/0),u(e),p(e>=r?"Đã đạt được!":"Không thể đạt được");return}const g=Math.log(r/e)/Math.log(1+T);if(g>0&&g!==1/0&&g<=100){i(g),u(e*Math.pow(1+T,g));const F=new Date,k=g*12;F.setMonth(F.getMonth()+Math.round(k));const W={day:"2-digit",month:"2-digit",year:"numeric"};p(F.toLocaleDateString("vi-VN",W))}else i(1/0),u(e),p(g>100?"Trên 100 năm":"Rất lâu hoặc không thể");return}if(V<=0&&T<=0&&e<r){i(1/0),u(e),p("Không thể đạt được (cần tiết kiệm hoặc lãi suất dương)");return}for(;S<r;)if(S=(S+V)*(1+T),j++,j>100){i(1/0),u(S),p("Trên 100 năm");return}if(i(j),u(S),j!==1/0&&j>=0){const g=new Date,F=j*12;g.setMonth(g.getMonth()+Math.round(F));const k={day:"2-digit",month:"2-digit",year:"numeric"};p(g.toLocaleDateString("vi-VN",k))}},[r,e,l,m]);c.useEffect(()=>{a===2&&r!==null&&r>0?R():a===1&&(i(null),u(null),p(""))},[r,e,l,m,a,R]);const B=()=>o(2),K=()=>{o(1)},P=n!==void 0&&n>0&&r!==null&&r>0;return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-indigo-50 to-blue-50 py-12 sm:py-16",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"max-w-2xl mx-auto",children:[t.jsx("div",{className:"relative mb-8 pt-4",children:t.jsxs("div",{className:"relative flex items-center justify-center",children:[t.jsxs(A,{to:"/",className:"absolute left-0 top-1/2 -translate-y-1/2 flex items-center text-sm text-purple-600 hover:text-purple-800 transition-colors group py-2 pr-2 -ml-1 sm:ml-0",children:[t.jsx(q,{size:18,className:"mr-1.5 transition-transform group-hover:-translate-x-1"}),"Trang chủ"]}),t.jsx("h1",{className:"text-3xl sm:text-4xl font-bold tracking-tight text-gray-800 text-center",children:"FI Calculator"})]})}),t.jsx("p",{className:"text-center text-gray-600 mb-10 text-sm sm:text-base",children:"Khám phá con số mục tiêu và lộ trình dự kiến để đạt được độc lập tài chính. Hãy bắt đầu bằng cách nhập chi tiêu hàng tháng của bạn."}),t.jsx(z,{mode:"wait",children:a===1&&t.jsxs(D.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.3,ease:"easeInOut"},className:"bg-white p-6 sm:p-8 rounded-xl shadow-xl border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("span",{className:"bg-purple-600 text-white rounded-full h-8 w-8 flex items-center justify-center text-sm font-bold mr-3",children:"1"}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-purple-700",children:"Xác Định Số Tiền Mục Tiêu (FI)"})]}),t.jsx(M,{id:"monthlyExpenses",label:"Chi tiêu trung bình mỗi tháng",value:n,onValueChange:d,icon:t.jsx(Q,{size:20,className:"text-purple-500"}),unit:"VNĐ",placeholder:"Nhập số tiền (bắt buộc)",tooltip:"Tổng số tiền bạn chi tiêu cho tất cả các nhu cầu trong một tháng. Mục này là bắt buộc.",isRequired:!0}),t.jsx(E,{id:"safeWithdrawalRate",label:"Tỷ lệ rút tiền an toàn (SWR)",value:f,onChange:v,icon:t.jsx($,{size:20,className:"text-purple-500"}),unit:"%",tooltip:"Tỷ lệ % bạn dự định rút từ quỹ FI mỗi năm để chi tiêu khi nghỉ hưu. Quy tắc phổ biến là 4%.",min:1,max:10}),r!==null&&r>0&&t.jsxs("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg border border-purple-200 text-center",children:[t.jsx("p",{className:"text-sm text-purple-800",children:"Để duy trì mức chi tiêu này, bạn cần có quỹ FI là:"}),t.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-purple-600 mt-1",children:w(r)})]}),t.jsxs("button",{onClick:B,disabled:!P,className:"mt-8 w-full flex items-center justify-center px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg shadow-md hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:["Tiếp Tục Ước Tính Thời Gian ",t.jsx(G,{size:20,className:"ml-2"})]})]},"step1")}),t.jsx(z,{mode:"wait",children:a===2&&t.jsxs(D.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},exit:{opacity:0,x:-30},transition:{duration:.3,ease:"easeInOut"},className:"bg-white p-6 sm:p-8 rounded-xl shadow-xl border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("span",{className:"bg-green-600 text-white rounded-full h-8 w-8 flex items-center justify-center text-sm font-bold mr-3",children:"2"}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-green-700",children:"Ước Tính Thời Gian Đạt FI"})]}),t.jsx("div",{className:"mb-4 p-3 bg-indigo-50 rounded-md border border-indigo-200",children:t.jsxs("p",{className:"text-sm text-indigo-700",children:["Số tiền mục tiêu FI của bạn: ",t.jsx("span",{className:"font-bold",children:w(r)})]})}),t.jsx(M,{id:"currentSavings",label:"Số tiền bạn đã tích lũy",value:e,onValueChange:N,icon:t.jsx(O,{size:20,className:"text-green-500"}),unit:"VNĐ",placeholder:"Ví dụ: 50,000,000"}),t.jsx(M,{id:"monthlyContribution",label:"Tiết kiệm/đầu tư thêm mỗi tháng",value:l,onValueChange:h,icon:t.jsx(Y,{size:20,className:"text-green-500"}),unit:"VNĐ",placeholder:"Ví dụ: 5,000,000",min:0}),t.jsx(E,{id:"expectedReturn",label:"Lợi suất đầu tư hàng năm (sau lạm phát)",value:m,onChange:I,icon:t.jsx(X,{size:20,className:"text-green-500"}),unit:"%",tooltip:"Lợi nhuận thực tế hàng năm sau khi đã trừ đi lạm phát. Ví dụ: Lãi suất kỳ vọng 10%, lạm phát 3% => nhập 7%.",min:0,max:30}),s!==null&&r!==null&&r>0&&(e??0)<r&&t.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200 text-center",children:[t.jsx("p",{className:"text-sm text-green-800",children:"Thời gian dự kiến để đạt Tự do Tài chính:"}),t.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-600 mt-1",children:s===1/0?"Rất lâu / Không thể":J(s)}),x&&s!==1/0&&s>=0&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Tương đương vào khoảng: ",x]}),b!==null&&s!==1/0&&s>=0&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Tổng số tiền dự kiến khi đó: ",w(b)]})]}),r!==null&&(e??0)>=r&&t.jsx("div",{className:"mt-6 p-4 bg-emerald-50 rounded-lg border border-emerald-300 text-center",children:t.jsx("p",{className:"text-lg font-semibold text-emerald-700",children:"🎉 Chúc mừng! Bạn đã đạt Tự do Tài chính!"})}),t.jsxs("button",{onClick:K,className:"mt-8 w-full flex items-center justify-center px-6 py-3 bg-gray-500 text-white font-semibold rounded-lg shadow-md hover:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:[t.jsx(H,{size:18,className:"mr-2"})," Tính toán lại / Quay lại"]})]},"step2")})]}),t.jsx("div",{className:"mt-12 text-center text-xs text-gray-500 max-w-2xl mx-auto",children:t.jsxs("p",{children:[t.jsx("strong",{children:"Lưu ý:"})," Các tính toán trên chỉ mang tính chất tham khảo và ước tính dựa trên các thông số bạn cung cấp. Kết quả thực tế có thể khác biệt do biến động thị trường và các yếu tố cá nhân. Hãy coi đây là một công cụ hỗ trợ lập kế hoạch, không phải là lời khuyên tài chính chuyên nghiệp."]})})]})})};export{rt as default};
