import{c as C,r as c,j as t,B as J,m as v,S as fe,Q as xe,R as he,K as pe,C as ge,X as ye,L as be}from"./index-BnnOIsFl.js";import{L as Z}from"./list-checks-JrZ71RDl.js";import{A as ke}from"./arrow-left-CV_jkEDQ.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ee=C("check",Ne);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ve=C("plus",we);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Se=C("rotate-ccw",je);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],Te=C("skip-forward",Ce);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],_e=C("trash-2",Me);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Ie=C("volume-2",De),q=[{name:"Thông báo 1",url:"/marcusfi-website/sound/ntf-snd-01.mp3"},{name:"Thông báo 2",url:"/marcusfi-website/sound/ntf-snd-02.mp3"},{name:"Thông báo 3",url:"/marcusfi-website/sound/ntf-snd-03.mp3"},{name:"Thông báo 4",url:"/marcusfi-website/sound/ntf-snd-04.mp3"},{name:"Thông báo 5",url:"/marcusfi-website/sound/ntf-snd-05.mp3"},{name:"Thông báo 6",url:"/marcusfi-website/sound/ntf-snd-06.mp3"}],O=[{id:"local_track1",title:"Nhạc Nền 1",src:"/marcusfi-website/music/music1.mp3"},{id:"local_track2",title:"Nhạc Nền 2",src:"/marcusfi-website/music/music2.mp3"},{id:"local_track3",title:"Nhạc Nền 3",src:"/marcusfi-website/music/music3.mp3"},{id:"local_track4",title:"Nhạc Nền 4",src:"/marcusfi-website/music/music4.mp3"},{id:"local_track5",title:"Nhạc Nền 5",src:"/marcusfi-website/music/music5.mp3"},{id:"local_track6",title:"Nhạc Nền 6",src:"/marcusfi-website/music/music6.mp3"},{id:"local_track7",title:"Nhạc Nền 7",src:"/marcusfi-website/music/music7.mp3"},{id:"local_track8",title:"Nhạc Nền 8",src:"/marcusfi-website/music/music8.mp3"},{id:"local_track9",title:"Nhạc Nền 9",src:"/marcusfi-website/music/music9.mp3"},{id:"local_track10",title:"Nhạc Nền 10",src:"/marcusfi-website/music/music10.mp3"}],$={workDuration:25,shortBreakDuration:5,longBreakDuration:15,cyclesBeforeLongBreak:4,includeMusic:!1,alarmSoundRepeat:2,darkModeOnStart:!0,selectedNotificationSound:q[0].url,currentMusicTrackIndex:0},Le=({isOpen:b,onClose:r,currentSettings:k,onSaveSettings:h})=>{const[u,l]=c.useState(k),g=c.useRef(null);c.useEffect(()=>{l(k)},[k]);const a=(i,N)=>{let x=N;typeof N=="string"&&(i==="workDuration"||i==="shortBreakDuration"||i==="longBreakDuration"||i==="cyclesBeforeLongBreak"||i==="alarmSoundRepeat")&&(x=parseInt(N,10),(isNaN(x)||x<1)&&(x=1)),i==="alarmSoundRepeat"?x=Math.max(1,Math.min(5,Number(x))):i!=="includeMusic"&&i!=="darkModeOnStart"&&i!=="selectedNotificationSound"&&i!=="currentMusicTrackIndex"&&typeof x=="number"&&(x=Math.max(1,Number(x))),l(y=>({...y,[i]:x}))},_=()=>{h(u),r()},j=()=>{g.current||(g.current=new Audio);const i=new URL(u.selectedNotificationSound,window.location.origin).href;g.current.src=i,g.current.play().catch(N=>console.error("Lỗi nghe thử âm báo:",N))};return b?t.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:r,children:t.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-md",onClick:i=>i.stopPropagation(),children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Cài đặt Timer"}),t.jsx("button",{onClick:r,className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(ye,{size:20})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Tập trung (phút)"}),t.jsx("input",{type:"number",min:"1",value:u.workDuration,onChange:i=>a("workDuration",i.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:ring-1 focus:ring-[#6e00ff] focus:border-[#6e00ff] text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Nghỉ ngắn (phút)"}),t.jsx("input",{type:"number",min:"1",value:u.shortBreakDuration,onChange:i=>a("shortBreakDuration",i.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:ring-1 focus:ring-[#6e00ff] focus:border-[#6e00ff] text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Nghỉ dài (phút)"}),t.jsx("input",{type:"number",min:"1",value:u.longBreakDuration,onChange:i=>a("longBreakDuration",i.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:ring-1 focus:ring-[#6e00ff] focus:border-[#6e00ff] text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Chu kỳ / Nghỉ dài"}),t.jsx("input",{type:"number",min:"1",value:u.cyclesBeforeLongBreak,onChange:i=>a("cyclesBeforeLongBreak",i.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:ring-1 focus:ring-[#6e00ff] focus:border-[#6e00ff] text-sm"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"alarmRepeat",className:"block text-xs font-medium text-gray-600 mb-1",children:"Số lần lặp âm báo (1-5)"}),t.jsx("input",{type:"number",id:"alarmRepeat",min:"1",max:"5",value:u.alarmSoundRepeat,onChange:i=>a("alarmSoundRepeat",i.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:ring-1 focus:ring-[#6e00ff] focus:border-[#6e00ff] text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"notificationSound",className:"block text-xs font-medium text-gray-600 mb-1",children:"Âm thanh thông báo"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("select",{id:"notificationSound",value:u.selectedNotificationSound,onChange:i=>a("selectedNotificationSound",i.target.value),className:"flex-grow px-3 py-1.5 border border-gray-300 rounded-md focus:ring-1 focus:ring-[#6e00ff] focus:border-[#6e00ff] text-sm",children:q.map(i=>t.jsx("option",{value:i.url,children:i.name},i.url))}),t.jsx("button",{onClick:j,title:"Nghe thử",className:"p-2 border border-gray-300 rounded-md hover:bg-gray-100 text-gray-600 transition-colors",children:t.jsx(Ie,{size:18})})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-2 space-x-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"modalIncludeMusic",checked:u.includeMusic,onChange:i=>a("includeMusic",i.target.checked),className:"h-4 w-4 text-[#6e00ff] focus:ring-offset-0 focus:ring-1 focus:ring-[#6e00ff] border-gray-300 rounded"}),t.jsx("label",{htmlFor:"modalIncludeMusic",className:"ml-2 block text-sm text-gray-700",children:"Nhạc nền (Work mode)"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"modalDarkModeOnStart",checked:u.darkModeOnStart,onChange:i=>a("darkModeOnStart",i.target.checked),className:"h-4 w-4 text-[#6e00ff] focus:ring-offset-0 focus:ring-1 focus:ring-[#6e00ff] border-gray-300 rounded"}),t.jsx("label",{htmlFor:"modalDarkModeOnStart",className:"ml-2 block text-sm text-gray-700",children:"Dark Mode khi Start"})]})]})]}),t.jsx("button",{onClick:_,className:"w-full mt-5 py-2.5 px-4 bg-[#6e00ff] text-white font-semibold rounded-lg hover:bg-[#5500cc] transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#6e00ff]",children:"Lưu Cài Đặt"})]})}):null},Be=({isOpen:b,taskName:r,onMarkAsCompleted:k,onDeletePermanently:h,onCancel:u})=>b?t.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:u,children:t.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white p-5 sm:p-6 rounded-lg shadow-xl w-full max-w-xs text-center",onClick:l=>l.stopPropagation(),children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Hoàn Thành Công Việc!"}),t.jsxs("p",{className:"text-sm text-gray-600 mb-5",children:["Tuyệt vời! Bạn đã hoàn thành: ",t.jsxs("span",{className:"font-medium text-purple-600",children:['"',r,'"']}),".",t.jsx("br",{}),"Chọn hành động tiếp theo:"]}),t.jsxs("div",{className:"space-y-2.5",children:[t.jsx("button",{onClick:k,className:"w-full px-4 py-2 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition",children:"Đánh dấu Hoàn thành"}),t.jsxs("button",{onClick:h,className:"w-full px-4 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600 transition flex items-center justify-center",children:[t.jsx(_e,{size:16,className:"mr-2"})," Xoá khỏi danh sách"]}),t.jsx("button",{onClick:u,className:"w-full mt-1 py-1 text-xs text-gray-500 hover:text-gray-700",children:"Để sau"})]})]})}):null,Re=({setIsPageInFocusMode:b})=>{const[r,k]=c.useState(()=>{const e=localStorage.getItem("timerSettings_v2");try{if(e){const s=JSON.parse(e);return{...$,...s,selectedNotificationSound:s.selectedNotificationSound&&q.some(n=>n.url===s.selectedNotificationSound)?s.selectedNotificationSound:$.selectedNotificationSound,currentMusicTrackIndex:typeof s.currentMusicTrackIndex=="number"&&s.currentMusicTrackIndex>=0&&s.currentMusicTrackIndex<O.length?s.currentMusicTrackIndex:$.currentMusicTrackIndex}}}catch(s){console.error("Lỗi parse settings từ localStorage:",s)}return $}),[h,u]=c.useState(r.workDuration*60),[l,g]=c.useState(!1),[a,_]=c.useState("work"),[j,i]=c.useState(0),[N,x]=c.useState(!1),[y,S]=c.useState(()=>{const e=localStorage.getItem("timerTasks_v2");if(e)try{const s=JSON.parse(e);if(Array.isArray(s))return s.map(n=>{let m="in_progress";return n.status==="in_progress"||n.status==="completed"?m=n.status:n.status==="hidden"&&(m="completed"),{id:String(n.id||Date.now()+Math.random()),name:String(n.name||"Công việc không tên"),status:m,cyclesCompleted:typeof n.cyclesCompleted=="number"?n.cyclesCompleted:0,estimatedCycles:typeof n.estimatedCycles=="number"&&n.estimatedCycles>0?n.estimatedCycles:1}}).filter(n=>n!==null&&typeof n.id=="string"&&typeof n.name=="string"&&(n.status==="in_progress"||n.status==="completed")&&typeof n.cyclesCompleted=="number"&&typeof n.estimatedCycles=="number")}catch(s){return console.error("Lỗi khi parse tasks từ localStorage:",s),[]}return[]}),[z,G]=c.useState(""),[F,K]=c.useState(1),[d,D]=c.useState(()=>{const e=localStorage.getItem("timerActiveTaskId");if(e&&e!=="undefined"&&e!=="null")try{const s=JSON.parse(e);return typeof s=="string"?s:null}catch(s){return console.error("Lỗi parse activeTaskId từ localStorage:",s,"Giá trị:",e),null}return null});c.useEffect(()=>{d&&(y.some(s=>s.id===d&&s.status==="in_progress")||D(null))},[y,d]);const[f,te]=c.useState(!1),[se,P]=c.useState(!1),[w,I]=c.useState(null),[U,re]=c.useState(!0),p=c.useRef(null),T=c.useRef(null),L=c.useRef(),B=c.useRef(0);c.useEffect(()=>{if(localStorage.setItem("timerSettings_v2",JSON.stringify(r)),!l){let e=r.workDuration*60;a==="short_break"?e=r.shortBreakDuration*60:a==="long_break"&&(e=r.longBreakDuration*60),h!==e&&u(e)}},[r,a,l,h]),c.useEffect(()=>{localStorage.setItem("timerTasks_v2",JSON.stringify(y))},[y]),c.useEffect(()=>{d===null?localStorage.removeItem("timerActiveTaskId"):localStorage.setItem("timerActiveTaskId",JSON.stringify(d))},[d]),c.useEffect(()=>{const e=l&&r.darkModeOnStart;e!==f&&(te(e),b(e),e||P(!1))},[l,r.darkModeOnStart,b,f]);const X=c.useCallback(()=>{if(!T.current)return;const e=new URL(r.selectedNotificationSound,window.location.origin).href;T.current.src!==e&&(T.current.src=e),B.current=0;const s=T.current,o=()=>{s&&B.current<r.alarmSoundRepeat&&(s.currentTime=0,s.play().then(()=>{B.current++}).catch(m=>console.error("Lỗi phát âm báo:",m)))},n=()=>{B.current<r.alarmSoundRepeat?o():s==null||s.removeEventListener("ended",n)};s.removeEventListener("ended",n),s.addEventListener("ended",n),o()},[r.selectedNotificationSound,r.alarmSoundRepeat]),Q=c.useCallback(()=>{X(),p.current&&!p.current.paused&&p.current.pause();let e,s,o=j;a==="work"?(d&&S(n=>n.map(m=>m.id===d?{...m,cyclesCompleted:m.cyclesCompleted+1}:m)),o=j+1,o>=r.cyclesBeforeLongBreak?(e="long_break",s=r.longBreakDuration*60,i(0)):(e="short_break",s=r.shortBreakDuration*60,i(o)),typeof Notification<"u"&&Notification.permission==="granted"?new Notification("Đến giờ giải lao rồi!",{body:`Hãy đứng dậy, di chuyển hoặc thư giãn một chút nhé. ${e==="short_break"?"Nghỉ ngắn":"Nghỉ dài"} sắp bắt đầu.`,icon:"/marcusfi-website/favicon.ico"}):typeof Notification<"u"&&Notification.permission!=="denied"&&Notification.requestPermission().then(n=>{n==="granted"&&new Notification("Đến giờ giải lao rồi!",{body:`Hãy đứng dậy, di chuyển hoặc thư giãn một chút nhé. ${e==="short_break"?"Nghỉ ngắn":"Nghỉ dài"} sắp bắt đầu.`,icon:"/marcusfi-website/favicon.ico"})})):(e="work",s=r.workDuration*60),_(e),u(s),g(!1)},[d,j,r,X,a,S]);c.useEffect(()=>(l&&h>0?L.current=window.setInterval(()=>{u(e=>e<=1?(clearInterval(L.current),Q(),0):e-1)},1e3):(!l||h===0)&&clearInterval(L.current),()=>{clearInterval(L.current)}),[l,h,Q]),c.useEffect(()=>{const e=p.current;if(!e)return;const s=()=>{const o=(r.currentMusicTrackIndex+1)%O.length;k(n=>({...n,currentMusicTrackIndex:o}))};if(e.removeEventListener("ended",s),e.addEventListener("ended",s),r.includeMusic&&a==="work"){const o=O[r.currentMusicTrackIndex];if(!o){console.error("Không tìm thấy track nhạc nền với index:",r.currentMusicTrackIndex),e.paused||e.pause();return}const n=o.src,m=new URL(n,window.location.origin).href;e.src!==m&&(e.src=n,e.load()),l&&e.paused?e.play().catch(A=>console.error("Lỗi phát nhạc nền:",A)):!l&&!e.paused&&e.pause()}else e.paused||e.pause();return()=>{e.removeEventListener("ended",s)}},[l,a,r.includeMusic,r.currentMusicTrackIndex,k]);const ne=()=>{if(a==="work"&&!d){alert("Vui lòng chọn một công việc để bắt đầu phiên làm việc.");return}if(h===0){let e;a==="work"?e=r.workDuration*60:a==="short_break"?e=r.shortBreakDuration*60:e=r.longBreakDuration*60,u(e)}g(!0)},ie=()=>g(!1),ae=()=>{g(!1);let e;a==="work"?e=r.workDuration*60:a==="short_break"?e=r.shortBreakDuration*60:e=r.longBreakDuration*60,u(e)},oe=()=>{a!=="work"&&(_("work"),u(r.workDuration*60),g(!1))},ce=()=>{if(z.trim()){const e={id:String(Date.now()+Math.random()),name:z.trim(),status:"in_progress",cyclesCompleted:0,estimatedCycles:F>0?F:1};S(s=>[...s,e].sort(M)),G(""),K(1)}},M=(e,s)=>{const o={in_progress:1,completed:2};return o[e.status]!==o[s.status]?o[e.status]-o[s.status]:0},W=e=>{const s=y.find(o=>o.id===e);s&&(s.status==="in_progress"?I(s):s.status==="completed"&&S(o=>o.map(n=>n.id===e?{...n,status:"in_progress"}:n).sort(M)))},le=()=>{w&&(S(e=>e.map(s=>s.id===w.id?{...s,status:"completed"}:s).sort(M)),d===w.id&&D(null),I(null))},de=()=>{w&&(S(e=>e.filter(s=>s.id!==w.id)),d===w.id&&D(null),I(null))},ue=e=>{const s=Math.floor(e/60),o=e%60;return`${s.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},Y=e=>{if(!e||e.status==="completed")return"Hoàn thành";const s=e.cyclesCompleted,o=e.estimatedCycles-s;if(o<=0)return"Sắp xong!";let n=0,m=j;for(let H=0;H<o;H++)n+=r.workDuration,H<o-1&&(m++,m>=r.cyclesBeforeLongBreak?(n+=r.longBreakDuration,m=0):n+=r.shortBreakDuration);const A=new Date(Date.now()+n*60*1e3),me={day:"2-digit",month:"2-digit",year:"numeric"};return A.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})+", "+A.toLocaleDateString("vi-VN",me)},R=d?y.find(e=>e.id===d):null,V=y.filter(e=>e.status==="in_progress").sort(M),E=y.filter(e=>e.status==="completed").sort(M);return t.jsxs("div",{className:`max-w-xl mx-auto p-4 sm:p-6 rounded-2xl shadow-xl transition-all duration-300 ease-in-out relative
                 ${f?"bg-black min-h-[380px] sm:min-h-[420px] flex flex-col justify-center items-center":"bg-white"}`,onMouseEnter:()=>{f&&P(!0)},onMouseLeave:()=>{f&&P(!1)},children:[t.jsx(J,{children:!f&&t.jsx(v.div,{initial:{opacity:1},exit:{opacity:0},className:"mb-4 text-center",children:t.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center text-sm text-gray-500 hover:text-[#6e00ff] transition-colors py-1.5 px-2.5 rounded-md hover:bg-gray-100 border border-transparent hover:border-gray-200",children:[t.jsx(fe,{size:15,className:"mr-1.5"}),"Cài đặt Timer"]})})}),t.jsxs("div",{className:`text-center transition-opacity duration-300 ${N?"opacity-10 pointer-events-none":"opacity-100"}`,children:[t.jsx(J,{mode:"wait",children:t.jsx(v.h2,{initial:{opacity:0,y:f?0:-10},animate:{opacity:f?0:1,y:0},exit:{opacity:0,y:f?0:10},transition:{duration:.25},className:`text-3xl sm:text-4xl font-bold mb-2
                            ${f?"h-0 overflow-hidden pointer-events-none":a==="work"?"text-gray-800":a==="short_break"?"text-green-600":"text-blue-600"}`,children:a==="work"?"Thời Gian Tập Trung":a==="short_break"?"Nghỉ Ngắn":"Nghỉ Dài"},a)}),t.jsx("div",{className:`text-6xl font-mono font-bold mb-4 ${f?"text-white text-7xl sm:text-8xl":"text-[#6e00ff]"}`,children:ue(h)}),t.jsxs("div",{className:`flex justify-center space-x-3 sm:space-x-4 mb-6 transition-opacity duration-300
                     ${f&&!se?"opacity-0":"opacity-100"}`,children:[t.jsx("button",{onClick:l?ie:ne,disabled:!l&&a==="work"&&!d,className:`p-3 rounded-full text-white transition-all duration-200 ease-in-out transform hover:scale-105
                       ${l?"bg-red-500 hover:bg-red-600 shadow-md":"bg-[#6e00ff] hover:bg-[#5500cc] shadow-md"}
                       ${!l&&a==="work"&&!d?"opacity-50 cursor-not-allowed":""}
                       ${f?l?"bg-red-500/70 hover:bg-red-600/90":"bg-purple-600/70 hover:bg-purple-500/90":""}
                      `,title:!l&&a==="work"&&!d?"Vui lòng chọn công việc":l?"Tạm dừng":"Bắt đầu",children:l?t.jsx(xe,{size:24}):t.jsx(he,{size:24})}),t.jsx("button",{onClick:ae,className:`p-3 rounded-full transition-colors transform hover:scale-105 shadow-sm
                       ${f?"bg-gray-600/60 hover:bg-gray-500/80 text-gray-200":"bg-gray-200 text-gray-700 hover:bg-gray-300"}
                      `,children:t.jsx(Se,{size:24})}),a!=="work"&&!l&&t.jsx("button",{onClick:oe,className:`p-3 rounded-full text-white transition-colors transform hover:scale-105 shadow-sm
                         ${f?"bg-amber-600/60 hover:bg-amber-500/80":"bg-amber-500 hover:bg-amber-600"}
                        `,children:t.jsx(Te,{size:24})})]})]}),f&&R&&t.jsxs("div",{className:"mt-4 sm:mt-6 text-center absolute bottom-6 left-1/2 -translate-x-1/2 w-full px-4",children:[t.jsx("p",{className:"text-lg sm:text-xl text-white font-semibold truncate",title:R.name,children:R.name}),t.jsxs("p",{className:"text-xs sm:text-sm text-gray-400 mt-2",children:["Dự kiến: ",Y(R)]})]}),t.jsxs("div",{className:`border-t border-gray-200 pt-6 mt-4 transition-opacity duration-300 ${f||N?"opacity-10 pointer-events-none h-0 overflow-hidden":"opacity-100"}`,children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Công việc của bạn"}),t.jsxs("div",{className:"flex gap-2 mb-4 items-end",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{htmlFor:"newTaskName",className:"block text-xs font-medium text-gray-600 mb-0.5",children:"Tên công việc"}),t.jsx("input",{type:"text",id:"newTaskName",value:z,onChange:e=>G(e.target.value),placeholder:"Thêm công việc mới...",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:ring-1 focus:ring-[#6e00ff] focus:border-[#6e00ff] text-sm"})]}),t.jsxs("div",{className:"w-20 sm:w-24",children:[t.jsx("label",{htmlFor:"newTaskCycles",className:"block text-xs font-medium text-gray-600 mb-0.5",children:"Cycles"}),t.jsx("input",{type:"number",id:"newTaskCycles",min:"1",value:F,onChange:e=>K(Number(e.target.value)),className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:ring-1 focus:ring-[#6e00ff] focus:border-[#6e00ff] text-sm"})]}),t.jsx("button",{onClick:ce,className:"px-3 py-1.5 bg-[#6e00ff] text-white rounded-md hover:bg-[#5500cc] transition-colors self-end h-[34px] text-sm",children:t.jsx(ve,{size:18})})]}),V.length>0&&t.jsx("div",{className:"text-sm mb-2 text-gray-600 font-medium",children:"Đang thực hiện:"}),t.jsxs("div",{className:"space-y-2",children:[V.length===0&&E.length===0&&t.jsx("p",{className:"text-sm text-gray-400 text-center py-3 italic",children:"Chưa có công việc nào được thêm."}),V.map(e=>t.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 bg-white ${d===e.id?"border-purple-500 shadow-lg ring-1 ring-purple-500":"border-gray-200 hover:border-gray-300"}`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2.5 flex-1 min-w-0",children:[t.jsx("button",{onClick:()=>W(e.id),className:"p-1.5 rounded-full transition-colors flex-shrink-0 bg-gray-200 hover:bg-gray-300 text-gray-500",children:t.jsx(ee,{size:14})}),t.jsx("span",{className:"text-sm truncate text-gray-800",title:e.name,children:e.name})]}),t.jsx("button",{onClick:()=>{e.status==="in_progress"&&D(d===e.id?null:e.id)},disabled:e.status!=="in_progress",className:`px-2.5 py-1 rounded-full text-xs font-medium transition-all whitespace-nowrap ${e.status==="completed"?"bg-green-100 text-green-700 cursor-default":d===e.id?"bg-purple-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-purple-100 hover:text-purple-700"}`,children:e.status==="completed"?"Đã xong":d===e.id?"Đang làm":"Chọn làm"})]}),t.jsxs("div",{className:"mt-2.5 flex flex-col sm:flex-row items-start sm:items-center justify-between text-xs text-gray-500 pl-9 space-y-1 sm:space-y-0",children:[t.jsxs("span",{className:"flex items-center",title:"Số chu kỳ đã hoàn thành / Số chu kỳ dự kiến",children:[t.jsx(Z,{size:14,className:"mr-1 text-blue-500 flex-shrink-0"}),e.cyclesCompleted," / ",e.estimatedCycles," cycles"]}),e.status==="in_progress"&&e.estimatedCycles>e.cyclesCompleted&&t.jsxs("span",{className:"flex items-center",title:"Thời gian dự kiến hoàn thành",children:[t.jsx(pe,{size:14,className:"mr-1 text-orange-500 flex-shrink-0"}),"Dự kiến: ",Y(e)]})]})]},e.id))]}),E.length>0&&t.jsxs("div",{className:"mt-5 pt-3 border-t border-gray-200",children:[t.jsxs("button",{onClick:()=>re(!U),className:"text-sm font-medium text-gray-700 hover:text-purple-600 flex items-center w-full justify-between py-1",children:[t.jsxs("span",{children:["Công việc đã hoàn thành (",E.length,")"]}),t.jsx(ge,{size:18,className:`transition-transform ${U?"rotate-180":""}`})]}),t.jsx(J,{children:U&&t.jsx(v.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden mt-2 space-y-2",children:E.map(e=>t.jsxs("div",{className:"p-3 rounded-lg border opacity-80 bg-gray-50 border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2.5 flex-1 min-w-0",children:[t.jsx("button",{onClick:()=>W(e.id),className:"p-1.5 rounded-full transition-colors flex-shrink-0 bg-green-500 hover:bg-green-600 text-white",children:t.jsx(ee,{size:14})}),t.jsx("span",{className:"text-sm truncate line-through text-gray-500",title:e.name,children:e.name})]}),t.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 cursor-default whitespace-nowrap",children:"Đã xong"})]}),t.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-400 pl-9",children:[t.jsx(Z,{size:14,className:"mr-1 text-blue-400 flex-shrink-0"}),"Hoàn thành ",e.cyclesCompleted," / ",e.estimatedCycles," cycles"]})]},e.id))})})]})]}),t.jsx("audio",{ref:p}),t.jsx("audio",{ref:T}),t.jsx(Le,{isOpen:N,onClose:()=>x(!1),currentSettings:r,onSaveSettings:e=>{if(p.current&&r.includeMusic&&!e.includeMusic&&p.current.pause(),e.currentMusicTrackIndex!==r.currentMusicTrackIndex&&p.current){const s=O[e.currentMusicTrackIndex];if(s){const o=s.src,n=new URL(o,window.location.origin).href;p.current.src!==n&&(p.current.src=o),l&&e.includeMusic&&a==="work"&&p.current.play().catch(m=>console.error("Error playing music after settings change:",m))}}k(e)}}),w&&t.jsx(Be,{isOpen:!!w,taskName:w.name,onMarkAsCompleted:le,onDeletePermanently:de,onCancel:()=>I(null)})]})},$e=()=>{const[b,r]=c.useState(!1);return t.jsx("div",{className:`min-h-screen py-12 sm:py-16 md:py-20 transition-colors duration-300 ease-in-out
                  ${b?"bg-black":"bg-gradient-to-br from-purple-50 via-white to-blue-50"}`,children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsx("div",{className:`text-center mb-8 sm:mb-10 transition-opacity duration-300 ${b?"opacity-0 h-0 overflow-hidden pointer-events-none":"opacity-100"}`,children:t.jsxs("div",{className:"relative max-w-xl mx-auto",children:[t.jsxs(be,{to:"/",className:"absolute left-0 top-1/2 -translate-y-1/2 flex items-center text-xs sm:text-sm text-purple-600 hover:text-purple-800 transition-colors group py-2 pr-2",children:[t.jsx(ke,{size:16,className:"mr-1 transition-transform group-hover:-translate-x-0.5"}),"Trang chủ"]}),t.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800",children:"Timer Block"})]})}),t.jsx(Re,{setIsPageInFocusMode:r})]})})};export{$e as default};
